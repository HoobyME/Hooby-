<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>الإعدادات - هوبي</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <style>
        /* إخفاء زر النشر في هذه الصفحة تحديداً */
        .add-post-btn { display: none !important; }
        
        /* تعديل الشريط السفلي ليكون متناسقاً بدون الزر */
        .bottom-nav { justify-content: space-around; }
    </style>
</head>
<body>

    <div class="header">
        <div class="brand-area">
            <a href="home.html" class="icon-btn" style="text-decoration:none; margin-left:10px;">
                <i class="fas fa-arrow-right"></i>
            </a>
            <h1 style="font-size: 20px; font-weight: bold; color: var(--primary-color); margin: 0;">الإعدادات</h1>
        </div>
        </div>

    <div class="settings-container">
        
        <div class="mini-profile-card" onclick="window.location.href='profile-view.html'">
            <img src="side.png" id="settingsUserImg" class="mini-profile-img">
            <div class="mini-profile-info">
                <h4 id="settingsUserName">المستخدم</h4>
                <p>تعديل الملف الشخصي</p>
            </div>
            <i class="fas fa-chevron-left setting-arrow" style="margin-right: auto;"></i>
        </div>

        <div class="settings-section-title">الحساب والأمان</div>
        <div class="settings-card">
            <div class="setting-item" onclick="openChangePassword()">
                <div class="setting-left">
                    <div class="setting-icon"><i class="fas fa-lock"></i></div>
                    <span class="setting-text">تغيير كلمة المرور</span>
                </div>
                <i class="fas fa-chevron-left setting-arrow"></i>
            </div>
            <div class="setting-item">
                <div class="setting-left">
                    <div class="setting-icon"><i class="fas fa-shield-alt"></i></div>
                    <span class="setting-text">الخصوصية</span>
                </div>
                <i class="fas fa-chevron-left setting-arrow"></i>
            </div>
        </div>

        <div class="settings-section-title">التطبيق</div>
        <div class="settings-card">
            <div class="setting-item">
                <div class="setting-left">
                    <div class="setting-icon"><i class="fas fa-moon"></i></div>
                    <span class="setting-text">الوضع المظلم</span>
                </div>
                <label class="switch">
                    <input type="checkbox" id="darkModeSwitch" onchange="toggleDarkMode()">
                    <span class="slider"></span>
                </label>
            </div>
            <div class="setting-item">
                <div class="setting-left">
                    <div class="setting-icon"><i class="fas fa-bell"></i></div>
                    <span class="setting-text">الإشعارات</span>
                </div>
                <label class="switch">
                    <input type="checkbox" checked>
                    <span class="slider"></span>
                </label>
            </div>
            <div class="setting-item">
                <div class="setting-left">
                    <div class="setting-icon"><i class="fas fa-globe"></i></div>
                    <span class="setting-text">اللغة</span>
                </div>
                <span style="font-size:12px; color:var(--text-sub);">العربية</span>
            </div>
        </div>

        <div class="settings-section-title" style="color:var(--danger-color);">إجراءات الحساب</div>
        <div class="settings-card" style="border-color: var(--danger-color);">
            <div class="setting-item" onclick="logout()">
                <div class="setting-left">
                    <div class="setting-icon"><i class="fas fa-sign-out-alt"></i></div>
                    <span class="setting-text">تسجيل الخروج</span>
                </div>
            </div>
            <div class="setting-item" onclick="deleteAccount()">
                <div class="setting-left">
                    <div class="setting-icon danger-icon"><i class="fas fa-trash-alt"></i></div>
                    <span class="setting-text danger-text">حذف الحساب نهائياً</span>
                </div>
            </div>
        </div>

    </div>

    <div class="bottom-nav">
        <a href="home.html" class="nav-item"><i class="fas fa-home"></i></a>
        <a href="profile-view.html" class="nav-item"><i class="fas fa-user"></i></a>
    </div>

    <div id="passwordModal" class="modal-popup-overlay">
        <div class="modal-box">
            <h3 style="margin-top:0; color:var(--primary-color)">تغيير كلمة المرور</h3>
            <div class="input-rect"><input type="password" placeholder="كلمة المرور الحالية"></div>
            <div class="input-rect"><input type="password" placeholder="كلمة المرور الجديدة"></div>
            <div class="input-rect"><input type="password" placeholder="تأكيد كلمة المرور"></div>
            <button onclick="savePassword()" class="btn-publish">حفظ</button>
            <button onclick="document.getElementById('passwordModal').style.display='none'" class="btn-text">إلغاء</button>
        </div>
    </div>

    <script type="module" src="main.js"></script>
    
    <script>
        // كود خاص بالإعدادات لتحميل البيانات عند الفتح
        window.onload = function() {
            // تفعيل السويتش إذا كان الوضع المظلم مفعلاً
            if(localStorage.getItem('theme') === 'dark') {
                document.body.classList.add('dark-mode');
                const switchBtn = document.getElementById('darkModeSwitch');
                if(switchBtn) switchBtn.checked = true;
            }
            
            // تحميل صورة واسم المستخدم
            document.getElementById("settingsUserImg").src = localStorage.getItem("hobbyImage") || "side.png";
            document.getElementById("settingsUserName").innerText = localStorage.getItem("hobbyName") || "المستخدم";
        }

        window.openChangePassword = function() { document.getElementById('passwordModal').style.display = 'flex'; }
        window.savePassword = function() { alert("تم تغيير كلمة المرور بنجاح!"); document.getElementById('passwordModal').style.display = 'none'; }
        
        window.deleteAccount = function() {
            if(confirm("هل أنت متأكد تماماً؟ سيتم حذف حسابك ولن يمكنك استعادته.")) {
                if(confirm("تحذير أخير: هذا الإجراء لا رجعة فيه!")) {
                    localStorage.clear();
                    window.location.href = 'index.html';
                }
            }
        }
    </script>
</body>
</html>
